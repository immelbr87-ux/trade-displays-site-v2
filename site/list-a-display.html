<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>List a Floor Model — Trade Displays</title>
  <meta name="description" content="List a showroom floor model in under a minute. Pickup-only. Structured condition grades. Ready-for-transit status." />
  <link rel="stylesheet" href="app.css" />
</head>
<body>
  <div id="bb-header"></div>

  <div class="container section">
    <div class="pagehead">
      <div class="kicker">FOR SELLERS (SHOWROOMS)</div>
      <h1 style="margin-top:10px;">List a Floor Model</h1>
      <p class="lede" style="max-width:900px;">Move floor models without the usual headache. This is a <strong>pickup-only</strong> listing with on-site buyer inspection. Funds remain in escrow until acceptance at pickup.</p>
    </div>

    <section class="panel">
      <h2 style="margin-top:0;">What you’ll provide</h2>
      <div class="feature-grid" style="grid-template-columns: repeat(4, minmax(0,1fr));">
        <div class="feature" style="text-align:left;">
          <div class="badge" style="margin-bottom:10px;"><span class="dot" style="background:var(--safety);"></span>Specs</div>
          <p class="muted">Brand / model, finish, key dimensions. Clear photos in a square grid.</p>
        </div>
        <div class="feature" style="text-align:left;">
          <div class="badge" style="margin-bottom:10px;"><span class="dot" style="background:var(--safety);"></span>Grade</div>
          <p class="muted">Grade A or B based on the <a href="/trust">condition standards</a>.</p>
        </div>
        <div class="feature" style="text-align:left;">
          <div class="badge" style="margin-bottom:10px;"><span class="dot" style="background:var(--safety);"></span>Pickup window</div>
          <p class="muted">A 7–14 day window. Buyers plan labor and trucks around this.</p>
        </div>
        <div class="feature" style="text-align:left; border-right:none;">
          <div class="badge" style="margin-bottom:10px;"><span class="dot" style="background:var(--safety);"></span>Completeness</div>
          <p class="muted">Call out missing parts. What’s included is what the buyer confirms.</p>
        </div>
      </div>
    </section>

    <div style="height:14px;"></div>

    <section class="panel">
      <h2 style="margin-top:0;">Create listing</h2>
      <p class="muted" style="margin-top:-6px;">This form is functional in production when connected to your listing endpoint. In static preview, it will save your payload on-screen.</p>

      <form id="listForm" class="form">
        <div class="grid" style="grid-template-columns:1fr 1fr;">
          <div>
            <label class="label">Title</label>
            <input class="input" name="title" required placeholder="Kohler Artifact 60\" Vanity — Walnut" />
          </div>
          <div>
            <label class="label">Category</label>
            <input class="input" name="category" placeholder="Vanity / Faucet / Shower" />
          </div>
          <div>
            <label class="label">Price (fixed)</label>
            <input class="input" name="price" required placeholder="$2,250" />
          </div>
          <div>
            <label class="label">Grade</label>
            <select class="input" name="grade" required>
              <option value="">Select…</option>
              <option>Grade A</option>
              <option>Grade B</option>
            </select>
          </div>
          <div>
            <label class="label">Pickup window start</label>
            <input class="input" name="pickup_start" type="date" />
          </div>
          <div>
            <label class="label">Pickup window end</label>
            <input class="input" name="pickup_end" type="date" />
          </div>
          <div>
            <label class="label">Location</label>
            <input class="input" name="location" placeholder="Mequon, WI" />
          </div>
          <div>
            <label class="label">Ready for transit?</label>
            <select class="input" name="ready_for_transit">
              <option value="yes">Yes — de-installed & staged</option>
              <option value="no">No — still installed</option>
            </select>
          </div>
        </div>

        <div style="height:10px;"></div>
        <label class="label">Notes</label>
        <textarea class="input" name="notes" rows="4" placeholder="Disclose missing parts, minor scuffs, what’s included, any access constraints (stairs/loading)."></textarea>

        <div style="height:10px;"></div>
        <div class="panel" style="background:rgba(255,255,255,.6);">
          <div class="muted" style="font-size:13px; line-height:1.55;">
            <strong>As-is, pickup-only:</strong> Buyer inspects on-site. If it matches the listing (grade, completeness, photos), the buyer confirms acceptance and escrow releases.
            If it does not match, the buyer may reject at pickup per the mismatch rules in <a href="/terms">Terms</a>.
          </div>
        </div>

        <div style="height:12px;"></div>
        <button class="btn btn-primary btn-pill" type="submit">Create listing</button>
        <a class="btn btn-pill" href="/example-listing">See example format</a>
      </form>

      <div id="result" style="margin-top:14px;"></div>
    </section>

  </div>

  <div id="bb-footer"></div>
  <script src="shared/include.js"></script>
  <script>
  (function(){
    const form = document.getElementById('listForm');
    const result = document.getElementById('result');
    const esc = (s)=>String(s??'').replace(/[&<>]/g,c=>({"&":"&amp;","<":"&lt;",">":"&gt;"}[c]));

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(form);
      const payload = Object.fromEntries(fd.entries());
      payload.ready_for_transit = payload.ready_for_transit === 'yes';

      try{
        const r = await fetch('/.netlify/functions/createDisplay', {
          method:'POST',
          headers:{'content-type':'application/json'},
          body: JSON.stringify(payload)
        });
        const data = await r.json();
        if(!r.ok) throw new Error(data?.error || 'Unable to create listing.');
        result.innerHTML = `<div class="panel"><h3 style="margin-top:0;">Listing created</h3><p class="muted" style="margin:0;">Your listing is live in the market.</p></div>`;
        form.reset();
      }catch(err){
        result.innerHTML = `<div class="panel"><h3 style="margin-top:0;">Saved (preview mode)</h3><p class="muted" style="margin:0;">This static preview can’t post to your listing endpoint. Here’s the payload we captured:</p><pre style="white-space:pre-wrap; margin:12px 0 0; background:#0b0b0f; color:#fff; padding:12px; border-radius:12px; overflow:auto;">${esc(JSON.stringify(payload, null, 2))}</pre></div>`;
      }
    });
  })();
  </script>
</body>
</html>
